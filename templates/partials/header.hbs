<!-- Header - Tailwind UI with Font Awesome - Simplified -->
<header class="main-header">
    <div class="flex items-center gap-4 flex-1">
        <!-- Mobile Menu Button -->
        <button onclick="toggleSidebar()" class="lg:hidden p-2 -ml-2 rounded-lg hover:bg-stone-100 text-stone-600">
            <i class="fa-solid fa-bars text-xl"></i>
        </button>
        
        <!-- Search Bar -->
        <div class="relative flex-1 max-w-lg" id="headerSearchContainer">
            <i class="fa-solid fa-magnifying-glass absolute left-3 top-1/2 -translate-y-1/2 text-stone-400"></i>
            <input type="text" 
                   id="headerSearchInput"
                   placeholder="Tìm kiếm khách hàng..." 
                   class="w-full pl-10 pr-4 py-2.5 bg-stone-50 border border-stone-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 active:bg-white transition-all">
            
            <!-- Search Results Dropdown -->
            <div id="headerSearchResults" class="hidden absolute top-full left-0 right-0 mt-2 bg-white rounded-xl shadow-xl border border-stone-100 max-h-96 overflow-y-auto z-50">
                <!-- Results injected here -->
            </div>
        </div>
        
        <!-- Date Display - Click to navigate to bookings -->
        <a href="/bookings" data-nav="/bookings" 
           class="hidden md:flex items-center gap-2 px-3 py-2 bg-stone-50 hover:bg-stone-100 rounded-lg text-stone-600 hover:text-primary-600 text-sm transition-colors cursor-pointer">
            <i class="fa-regular fa-calendar"></i>
            <span id="currentDate">{{formatDate today}}</span>
        </a>
        
        <!-- Notifications Dropdown -->
        <div class="notification-dropdown-container relative">
            <button class="relative flex items-center justify-center w-10 h-10 rounded-lg bg-stone-50 hover:bg-stone-100 text-stone-600 hover:text-primary-600 transition-colors">
                <i class="fa-solid fa-bell"></i>
                {{#if unreadCount}}
                <span class="absolute -top-1 -right-1 min-w-5 h-5 px-1 bg-red-500 text-white text-xs font-bold rounded-full flex items-center justify-center">
                    {{unreadCount}}
                </span>
                {{/if}}
            </button>
            
            <!-- Dropdown Panel -->
            <div class="notification-dropdown hidden absolute right-0 top-full mt-2 w-80 bg-white rounded-xl shadow-xl border border-stone-200 z-50 overflow-hidden">
                <div class="p-3 border-b border-stone-100 flex items-center justify-between">
                    <h4 class="font-semibold text-stone-900">Thông báo</h4>
                    {{#if unreadCount}}
                    <span class="px-2 py-0.5 bg-red-100 text-red-600 text-xs font-medium rounded-full">{{unreadCount}} mới</span>
                    {{/if}}
                </div>
                <div class="max-h-72 overflow-y-auto" id="notificationDropdownList">
                    {{#each recentNotifications}}
                    <div class="notification-dropdown-item p-3 hover:bg-stone-50 cursor-pointer border-b border-stone-50 {{#unless isRead}}bg-primary-50/50{{/unless}}"
                         data-action="header-notification-click"
                         data-notification-id="{{id}}" data-type="{{type}}" data-booking-id="{{bookingId}}" data-review-id="{{reviewId}}" data-account-id="{{accountId}}">
                        <div class="flex items-start gap-3">
                            <div class="w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0
                                {{#if (eq type 'BOOKING_CREATED')}}bg-yellow-100 text-yellow-600
                                {{else if (eq type 'REVIEW_CREATED')}}bg-yellow-100 text-yellow-600
                                {{else if (eq type 'STAFF_REGISTERED')}}bg-yellow-100 text-yellow-600
                                
                                {{else if (eq type 'BOOKING_CONFIRMED')}}bg-green-100 text-green-600
                                {{else if (eq type 'BOOKING_CHECKED_IN')}}bg-green-100 text-green-600
                                {{else if (eq type 'BOOKING_COMPLETED')}}bg-green-100 text-green-600
                                {{else if (eq type 'BOOKING_PAYMENT_SUCCESS')}}bg-green-100 text-green-600
                                {{else if (eq type 'BOOKING_REFUND_SUCCESS')}}bg-green-100 text-green-600
                                
                                {{else if (eq type 'BOOKING_CANCELLED')}}bg-red-100 text-red-600
                                {{else if (eq type 'BOOKING_NO_SHOW')}}bg-red-100 text-red-600
                                
                                {{else if (eq type 'BOOKING_UPDATED')}}bg-blue-100 text-blue-600
                                {{else if (eq type 'STAFF_STATUS_CHANGED')}}bg-blue-100 text-blue-600
                                {{else}}bg-stone-100 text-stone-600{{/if}}">
                                {{#if (eq type 'BOOKING_CREATED')}}<i class="fa-solid fa-plus text-xs"></i>
                                {{else if (eq type 'BOOKING_CONFIRMED')}}<i class="fa-solid fa-check text-xs"></i>
                                {{else if (eq type 'BOOKING_CHECKED_IN')}}<i class="fa-solid fa-door-open text-xs"></i>
                                {{else if (eq type 'BOOKING_COMPLETED')}}<i class="fa-solid fa-circle-check text-xs"></i>
                                {{else if (eq type 'BOOKING_CANCELLED')}}<i class="fa-solid fa-xmark text-xs"></i>
                                {{else if (eq type 'BOOKING_NO_SHOW')}}<i class="fa-solid fa-clock text-xs"></i>
                                {{else if (eq type 'REVIEW_CREATED')}}<i class="fa-solid fa-star text-xs"></i>
                                {{else if (eq type 'STAFF_REGISTERED')}}<i class="fa-solid fa-user-plus text-xs"></i>
                                {{else if (eq type 'STAFF_STATUS_CHANGED')}}<i class="fa-solid fa-user-pen text-xs"></i>
                                {{else if (eq type 'BOOKING_PAYMENT_SUCCESS')}}<i class="fa-solid fa-money-bill-wave text-xs"></i>
                                {{else if (eq type 'BOOKING_REFUND_SUCCESS')}}<i class="fa-solid fa-money-bill-transfer text-xs"></i>
                                {{else}}<i class="fa-solid fa-bell text-xs"></i>
                                {{/if}}
                            </div>
                            <div class="flex-1 min-w-0">
                                <p class="text-sm font-medium text-stone-900 truncate">{{title}}</p>
                                <p class="text-xs text-stone-500 truncate">{{content}}</p>
                            </div>
                        </div>
                    </div>
                    {{else}}
                    <div class="p-4 text-center text-stone-500 text-sm">
                        <i class="fa-solid fa-bell-slash mb-2"></i>
                        <p>Không có thông báo</p>
                    </div>
                    {{/each}}
                </div>
                <div class="p-2 border-t border-stone-100">
                    <a href="/notifications" data-nav="/notifications" 
                       class="block w-full text-center py-2 text-sm text-primary-600 hover:bg-primary-50 rounded-lg transition-colors font-medium">
                        Xem tất cả thông báo
                    </a>
                </div>
            </div>
        </div>
    </div>
</header>
