<!-- Forgot Password Page - Tailwind UI -->

<div class="text-center mb-6">
    <div class="w-14 h-14 rounded-xl bg-primary-100 flex items-center justify-center mx-auto mb-4">
        <i class="fa-solid fa-key text-primary-600 text-xl"></i>
    </div>
    <h2 class="text-2xl font-bold text-stone-900">Quên mật khẩu</h2>
    <p class="text-stone-500 mt-1">Nhập email để nhận link đặt lại mật khẩu</p>
</div>

<!-- Forgot Password Form -->
<form id="forgotPasswordForm">
    <div class="space-y-4">
        <div class="form-group">
            <label for="forgotEmail" class="form-label">
                Email <span class="text-red-500">*</span>
            </label>
            <div class="relative">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i class="fa-solid fa-envelope text-stone-400"></i>
                </div>
                <input type="email" class="form-input pl-10" id="forgotEmail" name="email" 
                       placeholder="Nhập email của bạn" required>
            </div>
        </div>
    </div>
    
    <button type="submit" class="btn btn-primary w-full mt-6">
        <i class="fa-solid fa-paper-plane"></i>
        Gửi yêu cầu
    </button>
</form>

<!-- Success State (Step 1 Complete) -->
<div id="forgotPasswordSuccess" class="hidden">
    <div class="text-center">
        <div class="w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-4">
            <i class="fa-solid fa-check text-green-600 text-2xl"></i>
        </div>
        <h3 class="text-lg font-semibold text-stone-900 mb-2">Email đã được gửi!</h3>
        <p class="text-stone-600 mb-6">
            Mã xác nhận đã được gửi đến email của bạn.
        </p>
        <button type="button" class="btn btn-primary w-full" id="goToStep2Btn">
            <i class="fa-solid fa-arrow-right"></i>
            Nhập mã xác nhận
        </button>
        
        <button type="button" class="btn btn-outline w-full mt-4" id="resendEmailBtn">
            <i class="fa-solid fa-rotate-right"></i>
            Gửi lại email
        </button>
    </div>
</div>

<!-- Step 2: OTP & Reset Password Form (Hidden by default) -->
<form id="resetPasswordForm" class="hidden">
    <input type="hidden" name="email" id="resetEmailHidden">
    <div class="space-y-4">
        <div class="text-center mb-6">
             <div class="w-14 h-14 rounded-xl bg-primary-100 flex items-center justify-center mx-auto mb-4">
                <i class="fa-solid fa-shield-halved text-primary-600 text-xl"></i>
            </div>
            <h2 class="text-xl font-bold text-stone-900">Đặt lại mật khẩu</h2>
            <p class="text-stone-500 mt-1">Nhập mã xác nhận và mật khẩu mới</p>
        </div>

        <!-- OTP Input -->
        <div class="form-group">
            <label for="resetToken" class="form-label">
                Mã xác nhận (6 số) <span class="text-red-500">*</span>
            </label>
            <div class="relative">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i class="fa-solid fa-key text-stone-400"></i>
                </div>
                <input type="text" class="form-input pl-10 tracking-widest text-center font-mono text-lg" 
                       id="resetToken" name="reset_token" 
                       placeholder="000000" maxlength="6" pattern="[0-9]{6}" required>
            </div>
        </div>

        <!-- New Password -->
        <div class="form-group">
            <label for="newPassword" class="form-label">
                Mật khẩu mới <span class="text-red-500">*</span>
            </label>
            <div class="relative">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i class="fa-solid fa-lock text-stone-400"></i>
                </div>
                <input type="password" class="form-input pl-10 pr-10" id="newPassword" name="new_password" 
                       placeholder="••••••••" required minlength="6">
                <button type="button" class="absolute inset-y-0 right-0 pr-3 flex items-center text-stone-400 hover:text-stone-600"
                        onclick="togglePassword('newPassword', 'iconNewPassword')">
                    <i class="fa-solid fa-eye" id="iconNewPassword"></i>
                </button>
            </div>
        </div>

        <!-- Confirm Password -->
        <div class="form-group">
            <label for="confirmNewPassword" class="form-label">
                Xác nhận mật khẩu mới <span class="text-red-500">*</span>
            </label>
            <div class="relative">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                    <i class="fa-solid fa-lock text-stone-400"></i>
                </div>
                <input type="password" class="form-input pl-10 pr-10" id="confirmNewPassword" name="confirm_new_password" 
                       placeholder="••••••••" required minlength="6">
                <button type="button" class="absolute inset-y-0 right-0 pr-3 flex items-center text-stone-400 hover:text-stone-600"
                        onclick="togglePassword('confirmNewPassword', 'iconConfirmNewPassword')">
                    <i class="fa-solid fa-eye" id="iconConfirmNewPassword"></i>
                </button>
            </div>
        </div>
    </div>
    
    <button type="submit" class="btn btn-primary w-full mt-6">
        <i class="fa-solid fa-check"></i>
        Đặt lại mật khẩu
    </button>
</form>

<div class="mt-8 text-center">
    <a href="/login" data-nav="/login" class="inline-flex items-center gap-2 text-sm text-stone-500 hover:text-primary-600 transition-colors">
        <i class="fa-solid fa-arrow-left"></i>
        Quay lại đăng nhập
    </a>
</div>
